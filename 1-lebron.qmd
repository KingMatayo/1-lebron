---
title: <span style="color:white">The Evolution of LeBron's Shot Choices (2003–2024)</span>
subtitle: "How the King’s shot selection mirrors the NBA’s transformation"

author: 
- name: "King Matayo"
  email: kingmatayo.thefirst@gmail.com
date: 12/07/2024

title-block-banner: ./assets/lebron-collage.jpg
title-block-banner-color: "black"

format: html
html:
code-fold: false
code-summary: "Code"
echo: false
css: style.css
toc: true
toc-location: left
number-sections: false
editor: visual
fig-cap-location: margin
---

```{r warning=FALSE, message=FALSE}

# Load required libraries
library(tidyverse)
library(BasketballAnalyzeR)
library(nbastatR)
library(ggimage)
library(cropcircles)
library(ggtext)
library(glue)
library(janitor)
library(htmltools)
library(gganimate)

# Source functions
source(file="./R/00-functions.R")

```

# A rookie’s first shot

LeBron James’ first-ever NBA shot was a mid-range jumper, 16 feet from the basket, in his debut game against the Sacramento Kings.

```{r warning=FALSE, message=FALSE,fig.align='center',fig.cap="Shots selection chart of Lebron's visit ever NBA game on Oct. 29, 2003. The league was a different world. Post-play dominated, and three-point shots were reserved for specialists."}

# Read csv file with all NBA shots data from 2003 to 2024
all_shots <- read.csv("./data/allshots-2003-2024.csv")


# Creating a basic shot chart for Lebron's 1st NBA shot

create_shotchart(all_shots,"LeBron James",20031029)


```

::: {.callout-caution collapse="true"}
## Video of Lebron's 1st shot in the NBA

{{< video ./assets/first-shot.mp4 title="Lebron's first shot" end="5" aspect-ratio="6x3" >}}
:::

Fast forward 20 years, and LeBron, the NBA’s all-time leading scorer, has transformed his game. His shot selection now reflects the modern league: fast-paced, 3PT-heavy, and analytics-driven.

```{r warning=FALSE, message=FALSE,fig.align='center',fig.cap=" 20 years later on Oct. 29, 2023, LeBron's shots selection chart, looks like this"}

# Creating a basic shot chart for Lebron's NBA shot choices, 20 years later

create_shotchart(all_shots,"LeBron James",20231029)
```

This is the story of how LeBron’s shot selection evolved, and what it reveals about the NBA’s metamorphosis.

```{r}
# Read csv file with all Lebron's shots data from 2003 to 2024
lebron_shots <- read.csv("./data/lebron-shots-2003-2024.csv")

# Filter data for the two games
lebron_two_games <- lebron_shots |>
  filter(dateGame %in% c("20031029", "20231029")) |>
  # Scale x and y coordinates (court dimensions adjusted manually)
  mutate(x = (locationX / 10) - 0,
         y = (locationY / 10) - 41.75) |>
  # Remove shots from beyond half-court range
  filter(y < 0) |> 
  mutate(
  # Categorize shots based on distance from the basket
  court_zone = case_when(
    distanceShot <= 8 ~ "Paint",               # Shots close to the basket
    distanceShot > 8 & distanceShot < 23 ~ "Mid-Range",  # Shots outside the paint but inside the 3PT line
    distanceShot >= 23 ~ "3PT",                # Shots beyond the 3-point line
    TRUE ~ "Other"                            # Catch-all for undefined cases
  )) |> 
  group_by(dateGame, court_zone) |>
  summarize(total_shots_two_games = n(), .groups = "drop") |>
  group_by(dateGame) |>
  mutate(
    all_shots_two_games = sum(total_shots_two_games),
    percentage = (total_shots_two_games / all_shots_two_games) * 100
  ) |>
  ungroup()

# Add label positions: midpoint between start and end points
label_positions <- lebron_two_games |>
  group_by(court_zone) |>
  summarize(
    x_pos = mean(as.numeric(as.factor(dateGame))),  # Midpoint of x positions
    y_pos = mean(percentage),                      # Average percentage for the label
    .groups = "drop"
  )

# Create a slope chart. FYI-> "Mid-Range" = "#50C878"
ggplot(lebron_two_games, aes(x = as.factor(dateGame), y = percentage, group = court_zone, color = court_zone)) +
  geom_line(linewidth = 1) +
  geom_point(size = 3) +
  geom_text(data = label_positions, aes(x = x_pos, y = y_pos, label = court_zone), size = 4, show.legend = FALSE) +
  scale_x_discrete(labels = c("20031029" = "October 29, 2003", "20231029" = "October 29, 2023")) +
  scale_color_manual(
    values = c("Paint" = "#99CCFF", "Mid-Range" = "#50C878", "3PT" = "#FF9999")
  ) +
  labs(
    title = "LeBron's shot choices: Oct. 29, 2003 vs. 2023",
    subtitle = "His 3PT attempts went up from 5% to 42% of all shot choices",
    x = "",
    y = "% of shots") +
  theme_minimal() +
  theme(
    text = element_text(size = 14),
    legend.position = "none",  # Remove the legend
    plot.title = element_text(size = 14, face = "bold"),
    plot.subtitle = element_text(size = 10)
  )
```

# 2003-2008: Living in the paint

In his early years, LeBron relied heavily on his unmatched athleticism. Most of his shots came from the paint, where he dominated defenders with explosive drives and finishes at the rim.

```{r}

# Since this is time-series data - Recreate line chart i did before, but this time make it animated with gganimate

```

# Sources:

Data: nbastatR

Lebron collage image on title banner: <https://www.highlandmint.com/products/lebron-james-nba-all-time-leading-scorer-through-the-years-bronze-coin-photo-mint>

Lebron's 1st NBA shot video: <https://youtube.com/shorts/ZhxMwCLSNnc?si=l89alP6ZODIdloPB>
